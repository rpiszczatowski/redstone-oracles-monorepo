name: Deploy docker images to AWS ECR Public
on:
  workflow_dispatch:
  push:
    branches: "**"
    paths-ignore:
      - packages/fuel-*/**
      - packages/gelato-*/**
      - packages/ton-*/**
      - packages/starknet-*/**
      - packages/cli/**
      - packages/custom-urls-manifest-updater/**
      - packages/data-analytics/**
      - packages/eth-contracts/**

jobs:
  oracle-node-image:
    name: oracle node docker image
    uses: ./.github/workflows/deploy-image-template.yml
    with:
      package: oracle-node
      image_name: redstone-oracle-node

  on-chain-relayer-image:
    name: on-chain-relayer docker image
    uses: ./.github/workflows/deploy-image-template.yml
    with:
      package: on-chain-relayer
      image_name: redstone-on-chain-relayer

  cache-service-image:
    name: cache-service docker image
    uses: ./.github/workflows/deploy-image-template.yml
    with:
      package: cache-service
      image_name: redstone-cache-service

  ton-relayer-image:
    name: ton-relayer docker image
    uses: ./.github/workflows/deploy-image-template.yml
    with:
      package: ton-relayer
      image_name: redstone-ton-relayer
      disable_push: true
